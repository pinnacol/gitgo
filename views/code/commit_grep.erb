<h1>Search Commits</h1>
<% unless repo.version_ok? %>
<em>warning the version of git on the server is insufficient for this action (must be <%= Gitgo::Repo::GIT_VERSION.join('.') %>, but is <%= repo.version.join('.') %>)</em>
<% end %>
<%=  erb :_grepnav, :layout => false %>

<form class="grep" action="<%= url('commit') %>" method="get">
  <dl class="form">
  <dt><label for="author">Author</label></dt>
  <dd><input id="author" type="text" name="author" value="<%= escape_html(author) %>" /></dd>
  <dt><label for="committer">Committer</label></dt>
  <dd><input id="committer" type="text" name="committer" value="<%= escape_html(committer) %>" /></dd>
  <dt><label for="grep">Message</label></dt>
  <dd><input id="grep" type="text" name="grep" value="<%= escape_html(grep) %>" /></dd>
  <dt><label for="ignore_case">Case-Insensitive</label></dt>
  <dd><input id="ignore_case" type="checkbox" name="regexp_ignore_case " value="true" <%= checked?(regexp_ignore_case) %>/></dd>
  <dt><label for="fixed_strings">Fixed Strings</label></dt>
  <dd><input id="fixed_strings" type="checkbox" name="fixed_strings" value="true" <%= checked?(fixed_strings) %>/></dd>
  <dt><label for="all_match">All Match</label></dt>
  <dd><input id="all_match" type="checkbox" name="all_match" value="true" <%= checked?(all_match) %>/></dd>
  <dt><label for="max_count">Max Count</label></dt>
  <dd><input id="max_count" type="text" name="max_count" value="<%= escape_html(max_count) %>" /></dd>
  <dt><input type="submit" value="Grep" /></dt>
  <dd></dd>
  </dl>
</form>

<% if selected.empty? %><em>None selected!</em><% end %>
<table><% selected.each do |commit| %>
<tr>
<td><%= escape_html(commit.author) %><% if commit.committer.to_s != commit.author.to_s %>(<%= escape_html(commit.committer) %>)<% end %></td>
<td><%= commit_link(commit.sha) %></a></td>
<td><%= gformat(commit.message) %></td>
</tr><% end %>
</table>